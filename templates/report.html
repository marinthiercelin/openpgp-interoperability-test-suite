<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>{{title}}</title>
    <style>
      main {
	  margin: 3em auto;
	  max-width: 1200px;
      }
      p, pre {
	  max-width: 800px;
      }

      /* Headings.  */
      h1 > a, h2 > a, h3 > a {
	  text-decoration: none;
	  color: black;
      }
      h1 > a:hover:after, h2 > a:hover:after, h3 > a:hover:after {
	  content: "⁋";
	  margin-left: 0.5em;
      }

      table.matrix {
	  border-collapse: collapse;
      }

      table.matrix td { border-left:   1px solid #ccc }
      table.matrix tr { border-bottom: 1px solid #ccc }

      table.matrix th, table.matrix td { min-width: 3em }
      table.matrix td { text-align: center }
      table.matrix td:last-child { text-align: left }
      table.matrix th { text-align: left }
      table.matrix th > form { display: inline }

      /* Rotate table headings.  */
      table.matrix th.rotate {
	  height: 150px;
	  white-space: nowrap;
      }

      table.matrix th.rotate > div {
	  transform: translate(25px, 51px) rotate(315deg);
	  width: 30px;
      }
      table.matrix th.rotate > div > span {
	  padding: 5px 10px;
      }
      /* /Rotate table headings.  */

      /* Summary table.  */
      table.summary th, table.summary td {
	  text-align: left;
	  padding: 0.1em 1em;
      }
      /* /Summary table.  */

      pre { background-color: #eee; }

      .score-good {
	  background: no-repeat left top url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjxzdmcgeG1sbnM6c3ZnPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTAiIGhlaWdodD0iMTAiPjxwYXRoIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MXB4IiBkPSJtIDEwLDAgLTEwLDEwIi8+PC9zdmc+Cg==);
	  background-color: lime;
      }

      .score-bad {
	  background: no-repeat right top url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjxzdmcgeG1sbnM6c3ZnPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTAiIGhlaWdodD0iMTAiPjxwYXRoIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MXB4IiBkPSJtIDEwLDEwIC0xMCwtMTAiLz48L3N2Zz4K);
	  background-color: red;
      }

      figure {
	  border: solid 1px black;
	  padding: 25px 50px;
	  margin: 50px;
	  max-width: 600px;
      }
      figure figcaption {
	  text-align: center;
	  margin-top: 2em;
      }

      pre, code {
	  background-color: #eee;
      }
    </style>
  </head>
  <body>
   <main>
    <h1>{{title}}</h1>
    <p>
      These are the results of running the OpenPGP interoperability
      test suite version {{version}}
      (<a href="https://gitlab.com/sequoia-pgp/openpgp-interoperability-test-suite/commit/{{
      commit }}">{{commit}}</a>) on {{ timestamp | date(format="%Y-%m-%dT%H:%M") }}.
    </p>
    <p>
      This test suite has been <a href="#hall-of-fame">very
      successful</a> in identifying problems in many OpenPGP
      implementations.  If you want to see your implementation
      included in these results, please implement the
      <a href="https://tools.ietf.org/html/draft-dkg-openpgp-stateless-cli-02">Stateless
      OpenPGP Command Line Interface</a> and open an issue in our
      <a href="https://gitlab.com/sequoia-pgp/openpgp-interoperability-test-suite/issues">tracker</a>.
      Note: The implementation doesn't have to be complete to be
      useful.
    </p>
    <hr />
    <h1>Table of Contents</h1>
    <ol>
      <li><a href="#how-to">How to read the test results</a></li>
      <li>
	<a href="#test-results">Test Results</a>
	<ol>
	  {%- for section in toc -%}
	  <li><a href="#{{section.0.slug}}">{{section.0.title}}</a>
	    <ol>
	      {%- for entry in section.1 -%}
	      <li><a href="#{{entry.slug}}">{{entry.title}}</a></li>
	      {%- endfor -%}
	    </ol>
	  </li>
	  {%- endfor -%}
	</ol>
      </li>
      <li><a href="#test-summary">Test Summary</a></li>
      <li><a href="#hall-of-fame">Hall of Fame</a></li>
      <li><a href="#configuration">Configuration</a></li>
    </ol>
    <hr />
    {% include "how-to.inc.html" %}
    <h1><a name="test-results" href="#test-results">Test Results</a></h1>
    {{body | safe}}
    <hr />
    <h1><a name="summary"><a name="test-summary" href="#test-summary">Test Summary</a></a></h1>
    <p>
      This table summarizes the above results.  Reducing the wealth of
      information to a set of numbers necessarily loses information,
      so take them with a grain of salt.  Nevertheless, these number
      provide an indication to what degree an implementation agrees
      with the expectations of this test suite.
    </p>
    <p>
      The first number is the number of tests where the implementation
      matched the test suite's expectations on all vectors of a given
      test.
    </p>
    <p>
      The second number is the number of test vectors where the
      implementation matched the test suite's expectations.
    </p>
    <p>
      The third number is the number of test vectors where the
      implementation did not match the test suite's expectations.
    </p>
    <table class="summary">
      <tr>
	<th>Implementation</th>
	<th>Matched all</th>
	<th>Matched</th>
	<th>Mismatched</th>
      </tr>
      {%- for row in summary -%}
      <tr>
	<td>{{ row.0 }}</td>
	<td>{{ row.1.all_good }}</td>
	<td>{{ row.1.good }}</td>
	<td>{{ row.1.bad }}</td>
      </tr>
      {%- endfor -%}
    </table>
    <hr />
    {% include "hall-of-fame.inc.html" %}
    <hr />
    <h1><a name="configuration" href="#configuration">Configuration</a></h1>
    <p>
      This is the configuration used to produce this report:
    </p>
    <pre><code>{{configuration | json_encode(pretty=true)}}</code></pre>
    <hr />
    <p>
      OpenPGP interoperability test suite version {{version}}
      (<a href="https://gitlab.com/sequoia-pgp/openpgp-interoperability-test-suite/commit/{{
		commit }}">{{commit}}</a>) powered
      by <a href="https://sequoia-pgp.org">Sequoia-PGP</a>.
    </p>
   </main>
  </body>
</html>
